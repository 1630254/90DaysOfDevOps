# Linux Linux File System Hierarchy & Scenario-Based Practice

## Part 1: Linux File System Hierarchy

| Directory   | Contains / Purpose                                | Example `ls -l` Output            | I would use this when...                          |
|-------------|---------------------------------------------------|-----------------------------------|--------------------------------------------------|
| `/`         | Root of the filesystem; everything starts here    | `bin  etc  home  root  var`       | I need to navigate to the very beginning of the system. |
| `/home`     | User home directories                             | `ubuntu`                          | I want to access my personal files or another user’s workspace. |
| `/root`     | Root user’s home directory                        | `.bashrc  .profile .ssh`          | I looged in as normal user and the switched to root for managing system-level tasks. |
| `/etc`      | System-wide configuration files                   | `passwd  ssh/  systemd/`          | I use this directory when i need to modify configurationfiles like `/etc/fstab` or `sshd_config`. |
| `/var/log`  | System and application log files                  | `syslog  dmesg   lastlog`         | I use this directory while troubleshooting for errors or monitoring system activity. |
| `/tmp`      | Temporary files created by applications           |                                   | I need to utilize this space for temporary files that don’t persist after reboot. |
| `/bin`      | Essential command binaries                        | `ls  cp  mv  bash`                | I run basic commands required for system operation. |
| `/usr/bin`  | User-level command binaries (non-essential tools) | `python3  vim  git`               | I need access to applications and tools installed for general use. |
| `/opt`      | Optional/third-party applications                 |                                   | I will use this directory to install or manage external third party applications. |


**Hands-on task:**
```bash
# Find the largest log file in /var/log
du -sh /var/log/* 2>/dev/null | sort -h | tail -5

# Look at a config file in /etc
cat /etc/hostname

# Check your home directory
ls -la ~

```
---
## Part 2: Scenario-Based Practice (40 minutes)

### Scenario 1: Service Not Starting
```
A web application service called 'myapp' failed to start after a server reboot.
What commands would you run to diagnose the issue?
Write at least 4 commands in order.
```
**My Solution (Step by step):**

**Step 1:** Check service status
```bash
systemctl status myapp
```
**Why this command?** It shows if the service is active, failed, or stopped

**Step 2:** To review last 50 log entries
```bash
journalctl -u myapp -n 50
```
**Why this command?** To review the last 50 log entries for the service and identify specific errors or warnings during startup.

**Step 3:** Check if service is enabled on boot
```bash
systemctl is-enabled myapp
```
**Why this command?** To confirm if the service is enabled to start automatically on boot.

**Step 4:** To verify dependent services
```bash
systemctl list-dependencies myapp
```
**Why this command?** To verify if any dependent services failed to start, which might prevent `myapp` from running.

---

### Scenario 2: High CPU Usage
```
Your manager reports that the application server is slow.
You SSH into the server. What commands would you run to identify
which process is using high CPU?
```
**My Solution (Step by step):**

**Step 1:** View live CPU usage
```bash
top
```
**Why this command?** To view live CPU usage and identify which processes are consuming the most CPU resources.

**Step 2:** View in more user-friendly, interactive way.
```bash
htop
```
**Why this command?** To get a more user-friendly, interactive view of processes sorted by CPU usage, with color coding and easier navigation.

**Step 3:** List the top 10 processes sorted by CPU consumption
```bash
ps aux --sort=-%cpu | head -10
```
**Why this command?** To list the top 10 processes sorted by CPU consumption, along with their PID, user, and command.

**Step 4:** To monitor CPU usage of a specific process
```bash
pidstat -p <PID> 1
```
**Why this command?** To monitor CPU usage of a specific process (using its PID) in real time, helping confirm if it’s consistently the culprit.

---

### Scenario 3: Finding Service Logs
```
A developer asks: "Where are the logs for the 'docker' service?"
The service is managed by systemd.
What commands would you use?
```
**My Solution (Step by step):**

**Step 1:** To view all logs
```bash
journalctl -u docker
```
**Why this command?** To view all logs generated by the 'docker' service managed by systemd.

**Step 2:** To quickly check the last 50 log entries
```bash
journalctl -u docker -n 50
```
**Why this command?** To quickly check the last 50 log entries for recent activity or errors.

**Step 3:** Follow the logs in real time
```bash
journalctl -u docker -f
```
**Why this command?** To follow the logs in real time, similar to `tail -f`, and watch events as they happen.

**Step 4:** To see the current status of the service
```bash
systemctl status docker
```
**Why this command?** To see the current status of the service along with a short snippet of its most recent logs.

---

### Scenario 4: File Permissions Issue
```
A script at /home/user/backup.sh is not executing.
When you run it: ./backup.sh
You get: "Permission denied"

What commands would you use to fix this?
```

**Hint:**
- First: Check what permissions the file has
- Understand: Files need 'x' (execute) permission to run
- Fix: Add execute permission with chmod

**Step-by-step solution structure:**
```
Step 1: Check current permissions
Command: ls -l /home/user/backup.sh
Look for: -rw-r--r-- (notice no 'x' = not executable)

Step 2: Add execute permission
Command: chmod +x /home/user/backup.sh

Step 3: Verify it worked
Command: ls -l /home/user/backup.sh
Look for: -rwxr-xr-x (notice 'x' = executable)

Step 4: Try running it
Command: ./backup.sh
```

---

**What I learned:** 
We have a structured troubleshooting approach for common server issues:
1. 	**Service startup problems** → status, logs, enablement, dependencies.
2. 	**Performance issues (CPU)** → live monitoring, sorting, per-process analysis.
3. 	**Service logs** → journald commands for history and real-time tracking.
4.  **Permission issue** → chmod command to modify permission for files.

This builds a solid foundation for diagnosing Linux server problems quickly and systematically.

---